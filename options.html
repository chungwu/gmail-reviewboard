<html>
<head>
<style type="text/css">
html, body { font-family: Helvetica,Arial, default; color: #333; font-size: 12px;}
a { color: #36c; cursor: pointer; text-decoration: none; outline:none }
</style>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">
function save() {
  var val = $("#url").val();
  if (!(val.indexOf("http://") == 0 || val.indexOf("https://") == 0)) {
    alert("Please enter a valid URL");
    return false;
  }
  if (val.lastIndexOf("/") == (val.length - 1)) {
    val = val.substring(0, val.length - 1);
  }

  localStorage['rbUrl'] = val;
  alert("Saved! You should reload your Gmail tabs to reflect the changes.");
  return true;
}

function load() {
  $("#url").val(localStorage['rbUrl']);
}

$(load);
</script>
</head>
<body>
<h1>Gmail Reviewboard Extension Setup</h1>
<div>
When your Gmail is showing an email from ReviewBoard,
<ul>
  <li>A PageAction is displayed, where you can approve the review directly.</li>
  <li>You can press 'w' to open the review diffs page.</li>
  <li>You can press 'W' to approve the review.</li>
</ul>
</div>
<div>
For this to work, we need to first know where your ReviewBoard instance is hosted.  Please enter your ReviewBoard URL prefix below:
</div>
<form onsubmit="save()">
  <div>
    Reviewboard URL: <input id="url" style="width:400px"/>
  </div>
  <div>
    <button action="submit">Save</button>
  </div>
</form>
</body>
</html>
